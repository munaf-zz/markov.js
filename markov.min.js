/*! markov.js 2013-10-07 */
(function(){var a="##SENTENCE_START##",b="##SENTENCE_END##",c=function(a){return this.options={inputText:a.inputText,numWords:a.numWords||100,endWithCompleteSentence:!1},this._setup(),this};c.prototype={_setup:function(){this.dictionary={},this.dictionary[a]=[],this.dictionary[b]=[a],this.options.inputText&&this.addCorpus(this.options.inputText)},_randomFollower:function(a){var b=this.dictionary[a];return b[Math.floor(Math.random()*b.length)]},_removePeriod:function(a){return a.replace(/\./g,"")},_isTerminating:function(a){return"."===a.charAt(a.length-1)},generate:function(c){for(var d,e="",f=a,g=0;c>g||this.options.endWithCompleteSentence===!0&&f!==a;)d=this._randomFollower(f),d===a||(d===b?e+=".":f===a?(e+=" "+d.charAt(0).toUpperCase()+d.slice(1),g++):(e+=" "+d,g++)),f=d;return e},addCorpus:function(c){c=c.replace(/[-,â€”?!]/g,"").replace(/\s{2,}/g," ");for(var d,e,f,g=c.split(" "),h=0;h<g.length;h++)d=g[h].toLowerCase().replace(/^\s+|\s+$/g,""),h!==g.length-1&&(e=g[h+1].toLowerCase()),f=!1,this._isTerminating(d)&&(d=this._removePeriod(d),f=!0),this.dictionary[d]||(this.dictionary[d]=[]),f===!0?this.dictionary[d].push(b):this.dictionary[d].push(this._removePeriod(e)),(0===h||this._isTerminating(g[h-1]))&&this.dictionary[a].push(d)}},window.Markov=c}).call(this);